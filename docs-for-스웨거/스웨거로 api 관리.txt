================================================================
  Swagger(springdoc-openapi)ë¡œ API ê´€ë¦¬
  í”„ë¡œì íŠ¸: smart-fnb-task (Spring Boot 4.x + Java 21)
  ì‘ì„±ì¼: 2026-02-22
================================================================

â”€â”€ Swaggerë€? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  API ëª…ì„¸ë¥¼ ìë™ìœ¼ë¡œ ë¬¸ì„œí™”í•˜ê³ , ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë„êµ¬.
  Spring ìƒíƒœê³„ì—ì„œëŠ” springdoc-openapi ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ í†µí•©í•œë‹¤.

  í•µì‹¬ ê°œë… 2ê°€ì§€:
  - OpenAPI (ìŠ¤í™)    : APIë¥¼ JSON/YAML í˜•íƒœë¡œ ê¸°ìˆ í•˜ëŠ” í‘œì¤€ ê·œê²© (v3.x)
  - Swagger UI (ì‹œê°í™”): OpenAPI ìŠ¤í™ì„ ì½ì–´ì„œ ì‚¬ëŒì´ ë³´ê¸° ì‰½ê²Œ ë Œë”ë§í•˜ëŠ” ì›¹ í™”ë©´

  ê³µì‹ ë¬¸ì„œ:
  - springdoc-openapi : https://springdoc.org
  - OpenAPI 3.0 ìŠ¤í™   : https://swagger.io/specification
  - Swagger UI        : https://swagger.io/tools/swagger-ui


â”€â”€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ (build.gradle) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  í˜„ì¬ í”„ë¡œì íŠ¸ ì„¤ì •:
  implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:3.0.1'

  ë²„ì „ ì„ íƒ ê¸°ì¤€:
  - springdoc 2.x ì´ìƒ   â†’ Spring Boot 3.x / Jakarta EE ì‚¬ìš©
  - springdoc 3.x ì´ìƒ   â†’ Spring Boot 4.x ì´ìƒ (í˜„ì¬ í”„ë¡œì íŠ¸)


â”€â”€ ì„œë²„ ì‹¤í–‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  1. Docker ì»¨í…Œì´ë„ˆ ë¨¼ì € ì‹¤í–‰ (DB ë“±)
     docker compose up -d

  2. Spring Boot ì„œë²„ ì‹¤í–‰
     ./gradlew bootRun

  â€» í¬íŠ¸ ì¶©ëŒ ì‹œ (8080 ì´ë¯¸ ì‚¬ìš© ì¤‘):
     lsof -ti:8080 | xargs kill -9
     ./gradlew bootRun


â”€â”€ Swagger í˜ì´ì§€ ì ‘ì† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  http://localhost:8080/swagger-ui/index.html

  ì´ ì£¼ì†Œë¡œ ì ‘ì†í•˜ë©´ í˜„ì¬ ë“±ë¡ëœ ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡ì´ ë‚˜ì˜¨ë‹¤.
  ê° ì—”ë“œí¬ì¸íŠ¸ë¥¼ í´ë¦­í•˜ë©´ ìš”ì²­ íŒŒë¼ë¯¸í„°, ì‘ë‹µ ìŠ¤í™, ì§ì ‘ í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.


â”€â”€ SecurityConfig - Swagger ê²½ë¡œ í—ˆìš© â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Spring Security ì ìš© ì‹œ Swagger ê²½ë¡œë¥¼ ë°˜ë“œì‹œ ì¸ì¦ ì—†ì´ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ ì„¤ì •í•´ì•¼ í•œë‹¤.

  í˜„ì¬ ì½”ë“œ (SecurityConfig.java):
    .requestMatchers("/swagger-ui/**", "/v3/api-docs/**").permitAll()

  - /swagger-ui/**  : Swagger UI ì •ì  ë¦¬ì†ŒìŠ¤
  - /v3/api-docs/** : OpenAPI JSON ìŠ¤í™ íŒŒì¼ (Swagger UIê°€ ì´ íŒŒì¼ì„ ì½ì–´ì„œ í™”ë©´ êµ¬ì„±)


â”€â”€ SwaggerConfig - JWT ì¸ì¦ ë²„íŠ¼ ì¶”ê°€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  í˜„ì¬ ì½”ë“œ (global/security/SwaggerConfig.java):

    @Bean
    public OpenAPI openAPI() {
        String schemeName = "Bearer Authentication";
        return new OpenAPI()
            .info(new Info()
                .title("Smart F&B API")
                .description("Smart F&B API")
                .version("1.0.0"))
            .addSecurityItem(new SecurityRequirement().addList(schemeName))
            .components(new Components().addSecuritySchemes(schemeName,
                new SecurityScheme()
                    .type(SecurityScheme.Type.HTTP)
                    .scheme("bearer")
                    .bearerFormat("JWT")));
    }

  .addSecurityItem()   â†’ ëª¨ë“  APIì— ê¸°ë³¸ìœ¼ë¡œ ì¸ì¦ ìš”êµ¬ í‘œì‹œ
  .addSecuritySchemes() â†’ Swagger UI ìƒë‹¨ì— "Authorize" ë²„íŠ¼ ìƒì„±

  ì‚¬ìš©ë²• (ì¸ì¦ì´ í•„ìš”í•œ API í…ŒìŠ¤íŠ¸ ì‹œ):
    1. POST /api/auth/login ìœ¼ë¡œ ë¡œê·¸ì¸ â†’ accessToken í™•ì¸
    2. Swagger UI ìƒë‹¨ ìš°ì¸¡ì˜ "Authorize" ë²„íŠ¼(ğŸ”’) í´ë¦­
    3. Value ì…ë ¥ì°½ì— í† í° ê°’ë§Œ ë¶™ì—¬ë„£ê¸° (Bearer ì ‘ë‘ì‚¬ ë¶ˆí•„ìš”)
    4. "Authorize" í´ë¦­ â†’ "Close"
    5. ì´í›„ ëª¨ë“  ìš”ì²­ì— Authorization: Bearer {token} í—¤ë” ìë™ ì¶”ê°€


â”€â”€ @Schema - DTO ì˜ˆì‹œê°’ ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Swagger UIì—ì„œ "Try it out"ì„ ëˆ„ë¥´ë©´ ìš”ì²­ ë³¸ë¬¸ì— ì˜ˆì‹œê°’ì´ ë¯¸ë¦¬ ì±„ì›Œì§€ê²Œ í•  ìˆ˜ ìˆë‹¤.

  í˜„ì¬ í”„ë¡œì íŠ¸ ì˜ˆì‹œ (LoginRequest.java):

    import io.swagger.v3.oas.annotations.media.Schema;

    public record LoginRequest(
        @NotBlank @Email
        @Schema(example = "terecal@daum.net")   // â† ì´ ë¶€ë¶„
        String email,

        @NotBlank
        @Schema(example = "terecal")
        String password
    ) {}

  @Schemaì˜ ì£¼ìš” ì†ì„±:
  - example     : ì˜ˆì‹œê°’ (UIì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì±„ì›Œì§)
  - description : í•„ë“œ ì„¤ëª… ë¬¸êµ¬
  - required    : í•„ìˆ˜ ì—¬ë¶€ í‘œì‹œ


â”€â”€ @Operation, @Tag - ì—”ë“œí¬ì¸íŠ¸ ì„¤ëª… ì¶”ê°€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  í•„ìš” ì‹œ Controllerì— ì¶”ê°€ì ì¸ ì„¤ëª…ì„ ë‹¬ ìˆ˜ ìˆë‹¤.

  import io.swagger.v3.oas.annotations.Operation;
  import io.swagger.v3.oas.annotations.tags.Tag;

  @Tag(name = "ì¸ì¦", description = "ë¡œê·¸ì¸, íšŒì›ê°€ì…, í† í° ì¬ë°œê¸‰ API")
  @RestController
  public class AuthController {

      @Operation(summary = "ë¡œê·¸ì¸", description = "ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸ í›„ í† í° ë°œê¸‰")
      @PostMapping("/api/auth/login")
      public ResponseEntity<AuthResponse> login(...) { ... }
  }

  í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì„¤ì • ì—†ì–´ë„ ë©”ì„œë“œëª… ê¸°ë°˜ìœ¼ë¡œ ìë™ í‘œì‹œë˜ì§€ë§Œ,
  í•œêµ­ì–´ ì„¤ëª…ì„ ë‹¬ë ¤ë©´ @Operation / @Tag ì‚¬ìš©ì„ ê¶Œì¥.


â”€â”€ ìë™ ìƒì„±ë˜ëŠ” API ë¬¸ì„œ JSON í™•ì¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Swagger UIê°€ ë‚´ë¶€ì ìœ¼ë¡œ ì½ëŠ” OpenAPI ìŠ¤í™ íŒŒì¼ì„ ì§ì ‘ í™•ì¸í•  ìˆ˜ ìˆë‹¤:
  http://localhost:8080/v3/api-docs

  ì´ JSONì„ Postman, Insomnia ê°™ì€ ë„êµ¬ë¡œ Importí•˜ë©´ ë™ì¼í•œ API ì»¬ë ‰ì…˜ ìƒì„± ê°€ëŠ¥.


â”€â”€ ìš´ì˜ í™˜ê²½ì—ì„œ Swagger ë¹„í™œì„±í™” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  ìš´ì˜ ì„œë²„(prod)ì—ì„œëŠ” API ëª…ì„¸ê°€ ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ë¹„í™œì„±í™”í•œë‹¤.

  application-prod.properties:
    springdoc.api-docs.enabled=false
    springdoc.swagger-ui.enabled=false

  ë˜ëŠ” í”„ë¡œíŒŒì¼ë¡œ ë¶„ë¦¬í•´ì„œ ê°œë°œ í™˜ê²½ì—ì„œë§Œ í™œì„±í™”í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤.


â”€â”€ Swagger UI ê¸°ë³¸ ë™ì‘ ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  application.propertiesì—ì„œ UI ë™ì‘ ë°©ì‹ì„ ì œì–´í•  ìˆ˜ ìˆë‹¤.

  # ì²˜ìŒ ì§„ì… ì‹œ ì»¨íŠ¸ë¡¤ëŸ¬ ëª©ë¡ì„ ì ‘íŒ ìƒíƒœë¡œ í‘œì‹œ (í˜„ì¬ í”„ë¡œì íŠ¸ ì ìš©)
  springdoc.swagger-ui.doc-expansion=none

  doc-expansion ì˜µì…˜:
  - none : ëª¨ë‘ ë‹«í˜ (ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë§ì„ ë•Œ í¸ë¦¬)
  - list : ê¸°ë³¸ê°’. ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì—´ë¦¼, ì—”ë“œí¬ì¸íŠ¸ëŠ” ë‹«í˜
  - full : ì „ë¶€ ì—´ë¦¼


â”€â”€ í˜„ì¬ í”„ë¡œì íŠ¸ API ëª©ë¡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  ì¸ì¦ (AuthController)
    POST /api/auth/signup          íšŒì›ê°€ì… (accessToken + refreshToken ë°˜í™˜)
    POST /api/auth/login           ë¡œê·¸ì¸    (accessToken + refreshToken ë°˜í™˜)
    POST /api/auth/refresh         Access Token ì¬ë°œê¸‰
    POST /api/auth/logout          ë¡œê·¸ì•„ì›ƒ (DBì—ì„œ refreshToken ì‚­ì œ) [ì¸ì¦ í•„ìš”]

  ìƒí’ˆ (ProductController)
    GET  /api/products             ìƒí’ˆ ëª©ë¡ ì¡°íšŒ
    POST /api/products             ìƒí’ˆ ë“±ë¡ [ì¸ì¦ í•„ìš”]
    ...

  ì—…ë¬´ ê´€ë¦¬ (DevspecController)
    GET  /api/devspec/projects     í”„ë¡œì íŠ¸ ëª©ë¡ ì¡°íšŒ
    ...

  â€» ìì„¸í•œ ëª©ë¡ì€ Swagger UIì—ì„œ í™•ì¸:
    http://localhost:8080/swagger-ui/index.html

================================================================
